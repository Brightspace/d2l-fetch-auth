language: node_js
node_js: stable
script:
- npm run build
- npm run test:lint
- wct --skip-plugin local
- 'if [ "$TRAVIS_BRANCH" == "master" ]; then frauci-update-version && export TRAVIS_TAG=$(frauci-get-version) && npm run build && npm run publish-release; fi'
env:
  global:
  - REPO_NAME=d2l-fetch-auth
  # SAUCE_USERNAME
  - secure: PAi0SiC2fng8OzZGqy6g5zlUhjgYcCGIvwxi0EBFjnZXqznQ2uvBqQia5egbWxMAW7nt7APNJQByHcB/Ygtg2AB7kBxTu8nas9qDrwxD1/31liga+cSKbneigV8GQtacMGEa4Lr3jsABF0kzX4PaRCwbzmOkZAVjkrK6ay/XaMSXhgkCkW6T4MYcZ59PgdSaoNemPf6aRRnGE+KpK5Y3Ee+UkcTAqjxwF+xfF3dC63bu42hteRFFL9G4jvXcP6vmqFosbfMYIfNeFXV9KIDM4hnmpyui7pqleiqHJWEF3ivhqSTfrwAsOUKWqtMNeQB4FWvH3SQTzYV6cdmLXWhG/6f0u2jj+ET2wkgHyojRQjMB6uTGG8jKWesScJuudoF+Vgc84NKiQ69aI58p1zEjPgRWoaMNOXDWO2vdBBTTOXgdXoc3BHTAVnpzNNina90k7NqplBxMSn8kkqExrm3nWnm5RZjHlVhHTI8laeIynkUdEMBpE7AHwcMwM+AKSQ1g2nAe0ZiZrqzrrujwxr1JYfZcVc7yrX0FiGIoVVE4fFelgk+a3dsQpytlK9NUWrtlnwwv8J/GUCCwql+MZE/AKZfd1mXof/m0TVdKsdPaaDeKSrp44W2Z49tTulbUgBfCZZMXuK++C+odKlMPYccAJoKyOQ2NfXshTICJB/EVF3w=
  # CDN_SECRET
  - secure: Au/jwDLDwH2pto9UtJl2peB0FyNOq/+GNw+y6suZBnEL0ond1PLuaJiYqwy1dWqmMLgY2A0TBIk+DBhsrhDu/Qoq/DAvVphVl97odNraQV7s6Knx4gA/+vvCeVLM2mCgDOFeQzdwGzeI1CHo1s21jlOmVBvi92HwjVKdaw8NOiZeJzUEQ5nNKeNXOFi8GSsI7iFtSl6JJPAj4SR+RrZukTOyK3z+BQKJpBzHDIgJWS4ob5AQnvcusQhXVH028ivyPdRqXJrEQ3Q4xElk3JcsBgTKCraVlOfxgeWyk0a8QaOrdFeQzf2sV+CcBXlYvv5Fi6y9P23zzlQn1vvVLTDf81gm5Y4IuveUg50CruhzekR+9jG3XkPoIavylwvfHAZJ4zCeQvmYftfREbP44H9CagqKZI6mei/2Y67OKPZJe7+hf0o3ryYiv991xTLLX0rj6CxQgKPLa5fs9BsdTrcAxZD06cEgufhJAdPXGSNjYeQjMO6sdVyNRQ/OzL04wIYxrFkmjzzxhCaexYdk61H3dcgK149r3Yr9iXPV1FwsRaSufyTT8bhYKIA9CmNJ4MJB+mb7/M6gxINCE84LSPIp2EvGlFAtTZJZhEVX+JFvVfPB73RxHUJpb2+/LPpeTOLFmsax2Gj9dkEzTpnBqhE5vUxeAeqdddknA1YOY8UgQwY=
  # GITHUB_RELEASE_TOKEN
  - secure: I3j974bfbT3DIKBhAHJEiqf8a9PzBnlkiw4TEgpMqHC4SdNDei18lzFe9JwElbMxbuMTt+1m6nGjgMlUTqhqBE4u0EsbMfpfpaRZ+SHKkeQCTWil3EsFuVzkq6aI3IbhZ8pP/L3J4tgVg/6vYXGzPmrGM9zsm2eM0iP3MsC7oTfUWIulFrQHr9A2PW7YUefY+iZLbRLc86NQMZkfr1wMkQ+2H/cpOhAJ/mX2BO5p5XGKvWvlYAS+Yn5cEFsgY/Yk6FjGHVhcjrNVkld8O6x1BdhILFeFkSL5lkQSUS3VdvdVGMkVTHgcphuaMP8/XIBNQy9SxFVGn8LwxUR6oVRxX0a01HSA71wV9jhocaZeXf1khSFgqwe6pso4+cuUMnNO67XzRqropIBWlEafw7IxZaEvlBsko7PMgfPw3ghHX4ub8SNXBMR9z5TOFL1MjVNf9zSYYavyN9/dCpuEh74Rm08HZfBtFM4gaYbskN5Z565XcCKd7rmcWEASm2ymckgFEwL70dhKFBWTP3oIsMy3j9UPCo1bl243zAlBz0v26Jd5zjKq+A2U+debEGdQ2A46NYnocYWpK1LBz6qohoOmTH5cPqOi6ZyHfVpFgnszhL7Rtm01ftll/Yd9znJwkyLTto80FBLjnZC1O9uVHkOdktgscB/jVHvgup+2WsjWXUA=
addons:
  jwt:
    #SAUCE_ACCESS_KEY
    secure: G41mNyGmUoxAjKzpsWfUliutXs7TM0MkhzGr6YUEKQTnu4tTpfwJeCg8elQeNPO7iAynxneA9Roq9Jr1tqm7/nxCEWakUdktEAVjdEQE0Ttt/frK5siMRxfsAU6Jun2VwZxEvEGMOglGj7ifjDv6D6IgW9TthW+8F+T47zhhSPmakGhGLaYzlsLtrBugKPEbhkai8I11EiEsXuGLDnpyo8ZSkIBlv8cjEicbERCbjUfezTNF7UEfXkOxCawhdZ7oX/INAaeirDip7TTmQk6f+Jw3NsADzddgsSvNKDb7A0XZF81rRr+y8zYHLm7gU3SF5/QWV8JqkxPXYVWjnrZ3f1DO+68yfEb0CE52+NqsJpwUEOPdsy7Fg+0p8oLjjXPL8NW+pD+gkm0hGtqE9nrtHjhULHZ9KuhIe5jmvkVTr2Y8jD16GFo/IOCkTL5hv0qNQTsrkydvQWG0Ke9sLZNuj3e3NgGE2mDuo37fGDmwxUB9RNLZDJHU6+yudQqlmXOnnreC3kIBgYvEmosDcDZMM+a2NyXbEGUO+LZnVE1qq70naycdmGyCAciyPOaOtCVYVavng+YTBxQ7aIFQsGIISet48waLP+r72CnOXxT6fSVbLHDUqiaQkgx2e1gEGVFNJNNKGBu0zOY8mwVQolzN20BtGLeum2N4EFnExA4WR9s=
